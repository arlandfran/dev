---
import { getSegments } from "../lib/breadcrumb";

interface Props {
  is404: boolean;
}

const { is404 } = Astro.props;
const segments = getSegments(Astro.url.pathname);
---

<nav aria-label="Breadcrumb" class="mb-4">
  <ol
    class="text-muted-foreground inline-flex flex-wrap font-mono font-medium tracking-tight"
  >
    <li class="inline-flex items-center">
      <a aria-current={segments.length === 0 ? "page" : undefined} href="/">
        <span class="sr-only">home</span>
        <span aria-hidden="true">arland@dev:~</span>
      </a>
      {
        segments.length === 0 ? (
          <span aria-hidden="true" class="text-foreground ml-0.5 font-semibold">
            $
          </span>
        ) : (
          <span aria-hidden="true">/</span>
        )
      }
    </li>
    {
      is404 ? (
        <li
          aria-current="page"
          class="text-foreground content-center font-semibold"
        >
          page-not-found
        </li>
      ) : (
        segments.map(({ name, href, isLast }) => (
          <li
            aria-current={isLast ? "page" : undefined}
            class="inline-flex items-center"
          >
            {isLast ? (
              <span class="text-foreground font-semibold">{name}</span>
            ) : (
              <>
                <a class="content-center" href={href}>
                  {name}
                </a>
                <span aria-hidden="true">/</span>
              </>
            )}
          </li>
        ))
      )
    }
  </ol>
</nav>
